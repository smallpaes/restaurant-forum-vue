(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55abaa3b"],{6135:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container py-3"},[a("AdminNav"),t.isLoading?a("Spinner"):t._e(),a("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():a("section",[a("table",{staticClass:"table"},[a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Email")]),a("th",{attrs:{scope:"col"}},[t._v("Role")]),a("th",{attrs:{scope:"col",width:"140"}},[t._v("Action")])])]),a("transition-group",{attrs:{name:"fade-up",tag:"tbody"}},t._l(t.users,function(e){return a("tr",{key:e.id},[a("th",{staticClass:"py-3",attrs:{scope:"row"}},[t._v(t._s(e.id))]),a("td",{staticClass:"py-3"},[t._v(t._s(e.email))]),a("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isAdmin?a("td",{key:t.admin,staticClass:"py-3"},[t._v("admin")]):a("td",{key:e,staticClass:"py-3"},[t._v("user")])]),a("td",[t.currentUser.id!==e.id?[a("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isAdmin?a("button",{key:e,staticClass:"btn btn-link pl-0",attrs:{type:"button"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.toggleUserRole(e.id)}}},[t._v("set as user")]):a("button",{key:t.admins,staticClass:"btn btn-link pl-0",attrs:{type:"button"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.toggleUserRole(e.id)}}},[t._v("set as admin")])])]:t._e()],2)],1)}),0)],1),t.totalPage>1?a("AdminPanelPagination",{attrs:{"total-page":t.totalPage,"current-page":t.currentPage,"admin-panel":t.adminPanel}}):t._e()],1)])],1)},n=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),i=a("bd86"),c=(a("7f7f"),a("e04c")),o=a("be6c"),u=a("c16c"),l=a("2fa3"),p=a("2375"),d=a("2f62");a("3e8f");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(a,!0).forEach(function(e){Object(i["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var f={components:{AdminNav:c["a"],Spinner:p["a"],AdminPanelPagination:u["a"]},data:function(){return{users:[],isLoading:!0,currentPage:1,totalPage:-1,adminPanel:""}},created:function(){this.fetchUsers(),this.adminPanel=this.$route.name},computed:m({},Object(d["b"])(["currentUser"])),beforeRouteUpdate:function(t,e,a){var r=t.query.page;this.fetchUsers(r),a()},methods:{fetchUsers:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a,r,n,s=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:1,t.prev=1,t.next=4,o["a"].users.get({page:e});case 4:if(a=t.sent,r=a.data,n=a.statusText,"OK"===n&&"success"===r.status){t.next=9;break}throw new Error(n);case 9:this.users=r.users,this.isLoading=!1,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](1),this.isLoading=!1,l["a"].fire({type:"error",title:"Cannot get user data, please try again later!"});case 17:case"end":return t.stop()}},t,this,[[1,13]])}));function e(){return t.apply(this,arguments)}return e}(),toggleUserRole:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var a,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].users.update({userId:e});case 3:if(a=t.sent,r=a.data,n=a.statusText,"OK"===n&&"success"===r.status){t.next=8;break}throw new Error(n);case 8:this.users=this.users.map(function(t){return t.id!==e?t:m({},t,{isAdmin:!t.isAdmin})}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),l["a"].fire({type:"error",title:"Cannot change user role, please try again later!"});case 14:case"end":return t.stop()}},t,this,[[0,11]])}));function e(e){return t.apply(this,arguments)}return e}()}},v=f,b=a("2877"),h=Object(b["a"])(v,r,n,!1,null,null,null);e["default"]=h.exports},be6c:function(t,e,a){"use strict";a("7f7f"),a("6b54");var r=a("2fa3");e["a"]={categories:{get:function(t){var e=t.page,a=e?new URLSearchParams({page:e}):"page=0";return r["b"].get("/admin/categories?".concat(a.toString()))},create:function(t){var e=t.name;return r["b"].post("/admin/categories",{name:e})},update:function(t){var e=t.categoryId,a=t.name;return r["b"].put("/admin/categories/".concat(e),{name:a})},delete:function(t){var e=t.categoryId;return r["b"].delete("/admin/categories/".concat(e))}},restaurants:{create:function(t){var e=t.formData;return r["b"].post("/admin/restaurants",e)},get:function(t){var e=t.page,a=new URLSearchParams({page:e});return r["b"].get("/admin/restaurants?".concat(a.toString()))},getDetail:function(t){var e=t.restaurantId;return r["b"].get("/admin/restaurants/".concat(e))},update:function(t){var e=t.restaurantId,a=t.formData;return r["b"].put("/admin/restaurants/".concat(e),a)},delete:function(t){var e=t.restaurantId;return r["b"].delete("/admin/restaurants/".concat(e))}},users:{get:function(t){var e=t.page,a=new URLSearchParams({page:e});return r["b"].get("/admin/users?".concat(a.toString()))},update:function(t){var e=t.userId;return r["b"].put("/admin/users/".concat(e))}}}},c16c:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination d-flex justify-content-center"},[a("li",{staticClass:"page-item"},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-link",attrs:{"aria-label":"Previous",to:{name:t.adminPanel,query:{page:t.previousPage}}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,function(e){return a("li",{key:e,staticClass:"page-item",class:["page-item",{active:t.currentPage===e}]},[a("router-link",{staticClass:"page-link",attrs:{to:{name:t.adminPanel,query:{page:e}}}},[t._v(t._s(e))])],1)}),a("li",{staticClass:"page-item"},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-link",attrs:{to:{name:t.adminPanel,query:{page:t.nextPage}},"aria-label":"Next"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)])},n=[],s=(a("c5f6"),{props:{currentPage:{type:Number,default:1},totalPage:{type:Number,default:-1},adminPanel:{type:String,required:!0}},computed:{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage===this.totalPage?null:this.currentPage+1}}}),i=s,c=a("2877"),o=Object(c["a"])(i,r,n,!1,null,null,null);e["a"]=o.exports},db7f:function(t,e,a){"use strict";var r=a("f70e"),n=a.n(r);n.a},e04c:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("h1",[t._v("餐廳後台")]),a("div",{staticClass:"row admin-panel-nav mx-0"},[a("router-link",{staticClass:"mr-4 underline-animation pb-1",attrs:{to:"/admin/restaurants"}},[a("i",{staticClass:"fas fa-store-alt mr-2"}),t._v("Restaurant\n    ")]),a("router-link",{staticClass:"mr-4 underline-animation pb-1",attrs:{to:"/admin/categories"}},[a("i",{staticClass:"fas fa-clipboard-list mr-2"}),t._v("Categories\n    ")]),a("router-link",{staticClass:"underline-animation pb-1",attrs:{to:"/admin/users"}},[a("i",{staticClass:"fas fa-user mr-2"}),t._v("Users\n    ")])],1)])},n=[],s=(a("db7f"),a("2877")),i={},c=Object(s["a"])(i,r,n,!1,null,"c7205352",null);e["a"]=c.exports},f70e:function(t,e,a){}}]);
//# sourceMappingURL=chunk-55abaa3b.8817b819.js.map