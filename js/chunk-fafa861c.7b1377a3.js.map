{"version":3,"sources":["webpack:///./src/views/UsersTop.vue?1862","webpack:///src/views/UsersTop.vue","webpack:///./src/views/UsersTop.vue?41fd","webpack:///./src/views/UsersTop.vue","webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./src/views/UsersTop.vue?d274","webpack:///./node_modules/core-js/modules/es6.array.sort.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_e","attrs","isLoading","_l","user","key","id","name","params","_f","image","_v","_s","FollowerCount","currentUser","on","$event","stopPropagation","preventDefault","unfollow","follow","staticRenderFns","mixins","computed","data","users","components","NavTabs","Spinner","created","fetchUser","methods","component","fails","module","exports","method","arg","call","$export","aFunction","toObject","$sort","sort","test","P","F","undefined","comparefn"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,WAAYJ,EAAa,UAAEI,EAAG,WAAWJ,EAAIO,KAAKH,EAAG,aAAa,CAACI,MAAM,CAAC,qBAAqB,oBAAoB,CAAGR,EAAIS,UAA4oCT,EAAIO,KAAroCH,EAAG,MAAM,CAACE,YAAY,wBAAwBN,EAAIU,GAAIV,EAAS,MAAE,SAASW,GAAM,OAAOP,EAAG,MAAM,CAACQ,IAAID,EAAKE,GAAGP,YAAY,iCAAiC,CAACF,EAAG,cAAc,CAACI,MAAM,CAAC,GAAK,CAACM,KAAM,OAAQC,OAAQ,CAACF,GAAIF,EAAKE,OAAO,CAACT,EAAG,MAAM,CAACE,YAAY,sCAAsCE,MAAM,CAAC,IAAMR,EAAIgB,GAAG,mBAAPhB,CAA2BW,EAAKM,YAAYb,EAAG,KAAK,CAACE,YAAY,mBAAmB,CAACN,EAAIkB,GAAGlB,EAAImB,GAAGR,EAAKG,SAASV,EAAG,IAAI,CAACE,YAAY,mCAAmC,CAACN,EAAIkB,GAAG,QAAQlB,EAAImB,GAAGR,EAAKS,kBAAkBhB,EAAG,IAAI,CAACE,YAAY,QAAQ,CAAEN,EAAIqB,YAAYR,KAAOF,EAAKE,GAAIT,EAAG,cAAc,CAACE,YAAY,0BAA0BE,MAAM,CAAC,GAAK,CAACM,KAAM,YAAaC,OAAQ,CAACF,GAAIF,EAAKE,KAAK,KAAO,WAAW,CAACb,EAAIkB,GAAG,QAASP,EAAe,WAAEP,EAAG,SAAS,CAACE,YAAY,0BAA0BE,MAAM,CAAC,KAAO,UAAUc,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBzB,EAAI0B,SAASf,EAAKE,OAAO,CAACb,EAAIkB,GAAG,UAAUd,EAAG,SAAS,CAACE,YAAY,0BAA0BE,MAAM,CAAC,KAAO,UAAUc,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBzB,EAAI2B,OAAOhB,EAAKE,OAAO,CAACb,EAAIkB,GAAG,SAAS,IAAI,KAAK,MAAe,IAC15CU,EAAkB,G,0sBC+CtB,OACEC,OAAQ,CAAC,EAAX,MACEC,SAAU,EAAZ,GACA,iCAEEC,KALF,WAMI,MAAO,CACLC,MAAO,GACPvB,WAAW,IAGfwB,WAAY,CACVC,QAAJ,OACIC,QAAJ,QAEEC,QAfF,WAgBInC,KAAKoC,aAEPC,QAAS,CACP,UADJ,wLAGA,oBAHA,mBAGA,EAHA,EAGA,OAHA,EAGA,WAEA,+BALA,sBAMA,aANA,OASA,mBACA,kBAVA,qDAYA,kBACA,aACA,aACA,uDAfA,gHAmBI,OAnBJ,mEAmBA,GAnBA,mHAqBA,gCArBA,mBAqBA,EArBA,EAqBA,OArBA,EAqBA,WAEA,+BAvBA,sBAwBA,aAxBA,OA2BA,sBACA,gBACA,gBACA,EAEA,KACA,EADA,CAEA,cACA,qCAGA,4DAtCA,qDAwCA,aACA,aACA,0DA1CA,iHA8CI,SA9CJ,mEA8CA,GA9CA,mHAgDA,mCAhDA,mBAgDA,EAhDA,EAgDA,OAhDA,EAgDA,WAEA,+BAlDA,sBAmDA,aAnDA,OAsDA,sBACA,gBACA,gBACA,EAEA,KACA,EADA,CAEA,cACA,qCAGA,4DAjEA,qDAmEA,aACA,aACA,6DArEA,mHClEkV,I,wBCQ9UC,EAAY,eACd,EACAxC,EACA6B,GACA,EACA,KACA,WACA,MAIa,aAAAW,E,6CClBf,IAAIC,EAAQ,EAAQ,QAEpBC,EAAOC,QAAU,SAAUC,EAAQC,GACjC,QAASD,GAAUH,EAAM,WAEvBI,EAAMD,EAAOE,KAAK,KAAM,aAA6B,GAAKF,EAAOE,KAAK,U,kCCN1E,yBAAoe,EAAG,G,oCCCve,IAAIC,EAAU,EAAQ,QAClBC,EAAY,EAAQ,QACpBC,EAAW,EAAQ,QACnBR,EAAQ,EAAQ,QAChBS,EAAQ,GAAGC,KACXC,EAAO,CAAC,EAAG,EAAG,GAElBL,EAAQA,EAAQM,EAAIN,EAAQO,GAAKb,EAAM,WAErCW,EAAKD,UAAKI,OACLd,EAAM,WAEXW,EAAKD,KAAK,UAEL,EAAQ,OAAR,CAA4BD,IAAS,QAAS,CAEnDC,KAAM,SAAcK,GAClB,YAAqBD,IAAdC,EACHN,EAAMJ,KAAKG,EAAS/C,OACpBgD,EAAMJ,KAAKG,EAAS/C,MAAO8C,EAAUQ,Q","file":"js/chunk-fafa861c.7b1377a3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-3\"},[_c('NavTabs'),(_vm.isLoading)?_c('Spinner'):_vm._e(),_c('transition',{attrs:{\"enter-active-class\":\"animated fadeIn\"}},[(!_vm.isLoading)?_c('div',{staticClass:\"row text-center mt-3\"},_vm._l((_vm.users),function(user){return _c('div',{key:user.id,staticClass:\"col-12 col-md-6 col-lg-3 my-3\"},[_c('router-link',{attrs:{\"to\":{name: 'user', params: {id: user.id}}}},[_c('img',{staticClass:\"rounded-circle img-thumbnail avatar\",attrs:{\"src\":_vm._f(\"placeholderImage\")(user.image)}})]),_c('h4',{staticClass:\"topic mb-0 mt-2\"},[_vm._v(_vm._s(user.name))]),_c('p',{staticClass:\"text-secondary d-block follower\"},[_vm._v(\"追蹤人數：\"+_vm._s(user.FollowerCount))]),_c('p',{staticClass:\"mt-2\"},[(_vm.currentUser.id === user.id)?_c('router-link',{staticClass:\"btn red-btn btn-sm mt-0\",attrs:{\"to\":{name: 'user-edit', params: {id: user.id}},\"role\":\"button\"}},[_vm._v(\"編輯\")]):(user.isFollowed)?_c('button',{staticClass:\"btn red-btn btn-sm mt-0\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.unfollow(user.id)}}},[_vm._v(\"取消追蹤\")]):_c('button',{staticClass:\"btn red-btn btn-sm mt-0\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.follow(user.id)}}},[_vm._v(\"追蹤\")])],1)],1)}),0):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container py-3\">\n    <!--NavTabs-->\n    <NavTabs />\n    <Spinner v-if=\"isLoading\" />\n    <transition enter-active-class=\"animated fadeIn\">\n      <div v-if=\"!isLoading\" class=\"row text-center mt-3\">\n        <!--User Card-->\n        <div v-for=\"user in users\" :key=\"user.id\" class=\"col-12 col-md-6 col-lg-3 my-3\">\n          <router-link :to=\"{name: 'user', params: {id: user.id}}\">\n            <img :src=\"user.image | placeholderImage\" class=\"rounded-circle img-thumbnail avatar\" />\n          </router-link>\n          <h4 class=\"topic mb-0 mt-2\">{{user.name}}</h4>\n          <p class=\"text-secondary d-block follower\">追蹤人數：{{user.FollowerCount}}</p>\n          <p class=\"mt-2\">\n            <router-link\n              v-if=\"currentUser.id === user.id\"\n              :to=\"{name: 'user-edit', params: {id: user.id}}\"\n              role=\"button\"\n              class=\"btn red-btn btn-sm mt-0\"\n            >編輯</router-link>\n            <button\n              v-else-if=\"user.isFollowed\"\n              @click.stop.prevent=\"unfollow(user.id)\"\n              type=\"button\"\n              class=\"btn red-btn btn-sm mt-0\"\n            >取消追蹤</button>\n            <button\n              v-else\n              @click.stop.prevent=\"follow(user.id)\"\n              type=\"button\"\n              class=\"btn red-btn btn-sm mt-0\"\n            >追蹤</button>\n          </p>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport userAPI from \"../apis/users\";\nimport { Toast } from \"../utils/helpers\";\nimport NavTabs from \"../components/NavTabs\";\nimport { placeholderImageCreator } from \"../utils/mixins\";\nimport { mapState } from \"vuex\";\nimport Spinner from \"../components/Spinner\";\n\nexport default {\n  mixins: [placeholderImageCreator],\n  computed: {\n    ...mapState([\"currentUser\"])\n  },\n  data() {\n    return {\n      users: [],\n      isLoading: true\n    };\n  },\n  components: {\n    NavTabs,\n    Spinner\n  },\n  created() {\n    this.fetchUser();\n  },\n  methods: {\n    async fetchUser() {\n      try {\n        const { data, statusText } = await userAPI.getTopUser();\n        // error handling\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(statusText);\n        }\n        // update user data\n        this.users = data.users;\n        this.isLoading = false;\n      } catch (error) {\n        this.isLoading = false;\n        Toast.fire({\n          type: \"error\",\n          title: \"Cannot get top users, please try again later\"\n        });\n      }\n    },\n    async follow(userId) {\n      try {\n        const { data, statusText } = await userAPI.addFollowing({ userId });\n        // error handling\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(statusText);\n        }\n        // update user data\n        this.users = this.users\n          .map(user => {\n            if (user.id !== userId) {\n              return user;\n            }\n            return {\n              ...user,\n              isFollowed: true,\n              FollowerCount: (user.FollowerCount += 1)\n            };\n          })\n          .sort((a, b) => b.FollowerCount - a.FollowerCount);\n      } catch (error) {\n        Toast.fire({\n          type: \"error\",\n          title: \"Cannot follow this user, please try again later\"\n        });\n      }\n    },\n    async unfollow(userId) {\n      try {\n        const { data, statusText } = await userAPI.removeFollowing({ userId });\n        // error handling\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(statusText);\n        }\n        //update user data\n        this.users = this.users\n          .map(user => {\n            if (user.id !== userId) {\n              return user;\n            }\n            return {\n              ...user,\n              isFollowed: false,\n              FollowerCount: (user.FollowerCount -= 1)\n            };\n          })\n          .sort((a, b) => b.FollowerCount - a.FollowerCount);\n      } catch (error) {\n        Toast.fire({\n          type: \"error\",\n          title: \"Cannnot unfollow this user, please try again later\"\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.avatar {\n  width: 30%;\n}\n\n.btn-group-sm > .btn,\n.btn-sm {\n  border-radius: 0.2rem;\n  padding: 0.1rem 0.8rem;\n}\n\n/*md size*/\n@media screen and (min-width: 768px) {\n  /*Top User Section*/\n  .avatar {\n    width: 40%;\n  }\n}\n\n/*lg size*/\n@media screen and (min-width: 992px) {\n  /*Top User Section*/\n  .avatar {\n    width: 55%;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UsersTop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UsersTop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UsersTop.vue?vue&type=template&id=2b4fe06c&scoped=true&\"\nimport script from \"./UsersTop.vue?vue&type=script&lang=js&\"\nexport * from \"./UsersTop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UsersTop.vue?vue&type=style&index=0&id=2b4fe06c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b4fe06c\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UsersTop.vue?vue&type=style&index=0&id=2b4fe06c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UsersTop.vue?vue&type=style&index=0&id=2b4fe06c&scoped=true&lang=css&\"","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n"],"sourceRoot":""}