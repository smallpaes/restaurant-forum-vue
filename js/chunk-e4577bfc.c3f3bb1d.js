(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4577bfc"],{"1af6":function(t,a,e){var r=e("63b6");r(r.S,"Array",{isArray:e("9003")})},"20fd":function(t,a,e){"use strict";var r=e("d9f6"),n=e("aebd");t.exports=function(t,a,e){a in t?r.f(t,a,n(0,e)):t[a]=e}},"549b":function(t,a,e){"use strict";var r=e("d864"),n=e("63b6"),s=e("241e"),i=e("b0dc"),u=e("3702"),o=e("b447"),c=e("20fd"),l=e("7cd6");n(n.S+n.F*!e("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var a,e,n,d,f=s(t),p="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,v=void 0!==m,b=0,h=l(f);if(v&&(m=r(m,g>2?arguments[2]:void 0,2)),void 0==h||p==Array&&u(h))for(a=o(f.length),e=new p(a);a>b;b++)c(e,b,v?m(f[b],b):f[b]);else for(d=h.call(f),e=new p;!(n=d.next()).done;b++)c(e,b,v?i(d,m,[n.value,b],!0):n.value);return e.length=b,e}})},"54a1":function(t,a,e){e("6c1c"),e("1654"),t.exports=e("95d5")},"73a3":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container py-3"},[e("AdminNav"),e("router-link",{staticClass:"btn red-btn mb-4 text-right",attrs:{to:{name:"admin-restaurant-new"}}},[t._v("New Restaurant")]),t.isLoading?e("Spinner"):t._e(),e("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():e("section",[e("AdminRestaurantsTable",{attrs:{"initial-restaurants":t.restaurants}}),t.totalPage>1?e("AdminPanelPagination",{attrs:{"current-page":t.currentPage,"total-page":t.totalPage,"admin-panel":t.adminPanel}}):t._e()],1)])],1)},n=[],s=(e("96cf"),e("3b8d")),i=(e("7f7f"),e("e04c")),u=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("table",{staticClass:"table"},[t._m(0),e("transition-group",{attrs:{name:"fade-up",tag:"tbody"}},t._l(t.restaurants,function(a){return e("tr",{key:a.id},[e("th",{staticClass:"pt-3",attrs:{scope:"row"}},[t._v(t._s(a.id))]),e("td",{staticClass:"pt-3"},[t._v(t._s(a.Category&&a.Category.name))]),e("td",{staticClass:"pt-3"},[t._v(t._s(a.name))]),e("td",[e("router-link",{staticClass:"btn btn-link pr-4",attrs:{to:{name:"admin-restaurant",params:{id:a.id}}}},[t._v("Show")]),e("router-link",{staticClass:"btn btn-link pr-4",attrs:{to:{name:"admin-restaurant-edit",params:{id:a.id}}}},[t._v("Edit")]),e("button",{staticClass:"btn btn-link pr-4",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteRestaurant(a.id)}}},[t._v("Delete")])],1)])}),0)],1)},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"thead-dark"},[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),e("th",{attrs:{scope:"col"}},[t._v("Category")]),e("th",{attrs:{scope:"col"}},[t._v("Name")]),e("th",{attrs:{scope:"col",width:"300"}},[t._v("操作")])])])}],c=e("a745"),l=e.n(c);function d(t){if(l()(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}var f=e("774e"),p=e.n(f),g=e("c8bb"),m=e.n(g);function v(t){if(m()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return p()(t)}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(t){return d(t)||v(t)||b()}var y=e("be6c"),P=e("2fa3"),w={props:{initialRestaurants:{type:Array,required:!0}},data:function(){return{restaurants:this.initialRestaurants}},watch:{initialRestaurants:function(t){this.restaurants=h(t)}},methods:{deleteRestaurant:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(a){var e,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y["a"].restaurants.delete({restaurantId:a});case 3:if(e=t.sent,r=e.data,n=e.statusText,"OK"===n&&"success"===r.status){t.next=8;break}throw new Error(n);case 8:this.restaurants=this.restaurants.filter(function(t){return t.id!==a}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),P["a"].fire({type:"error",title:"Cannot delete this restaurant, please try again later"});case 14:case"end":return t.stop()}},t,this,[[0,11]])}));function a(a){return t.apply(this,arguments)}return a}()}},_=w,x=e("2877"),C=Object(x["a"])(_,u,o,!1,null,null,null),k=C.exports,A=e("c16c"),R=e("2375"),S={components:{AdminNav:i["a"],AdminRestaurantsTable:k,Spinner:R["a"],AdminPanelPagination:A["a"]},data:function(){return{restaurants:[],isLoading:!0,currentPage:1,totalPage:-1,adminPanel:""}},created:function(){this.fetchRestaurants(),this.adminPanel=this.$route.name},beforeRouteUpdate:function(t,a,e){var r=t.query.page;this.fetchRestaurants(r),e()},methods:{fetchRestaurants:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var a,e,r,n,s=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:1,t.prev=1,t.next=4,y["a"].restaurants.get({page:a});case 4:if(e=t.sent,r=e.data,n=e.statusText,"OK"===n){t.next=9;break}throw new Error(n);case 9:this.restaurants=r.restaurants,this.currentPage=r.currentPage,this.totalPage=r.pagination.length,this.isLoading=!1,t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](1),this.isLoading=!1,P["a"].fire({type:"error",title:"Cannot show restaurants, please try again later"});case 19:case"end":return t.stop()}},t,this,[[1,15]])}));function a(){return t.apply(this,arguments)}return a}()}},O=S,j=Object(x["a"])(O,r,n,!1,null,null,null);a["default"]=j.exports},"774e":function(t,a,e){t.exports=e("d2d5")},9003:function(t,a,e){var r=e("6b4c");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"95d5":function(t,a,e){var r=e("40c3"),n=e("5168")("iterator"),s=e("481b");t.exports=e("584a").isIterable=function(t){var a=Object(t);return void 0!==a[n]||"@@iterator"in a||s.hasOwnProperty(r(a))}},a745:function(t,a,e){t.exports=e("f410")},be6c:function(t,a,e){"use strict";e("7f7f"),e("6b54");var r=e("2fa3");a["a"]={categories:{get:function(t){var a=t.page,e=a?new URLSearchParams({page:a}):"page=0";return r["b"].get("/admin/categories?".concat(e.toString()))},create:function(t){var a=t.name;return r["b"].post("/admin/categories",{name:a})},update:function(t){var a=t.categoryId,e=t.name;return r["b"].put("/admin/categories/".concat(a),{name:e})},delete:function(t){var a=t.categoryId;return r["b"].delete("/admin/categories/".concat(a))}},restaurants:{create:function(t){var a=t.formData;return r["b"].post("/admin/restaurants",a)},get:function(t){var a=t.page,e=new URLSearchParams({page:a});return r["b"].get("/admin/restaurants?".concat(e.toString()))},getDetail:function(t){var a=t.restaurantId;return r["b"].get("/admin/restaurants/".concat(a))},update:function(t){var a=t.restaurantId,e=t.formData;return r["b"].put("/admin/restaurants/".concat(a),e)},delete:function(t){var a=t.restaurantId;return r["b"].delete("/admin/restaurants/".concat(a))}},users:{get:function(t){var a=t.page,e=new URLSearchParams({page:a});return r["b"].get("/admin/users?".concat(e.toString()))},update:function(t){var a=t.userId;return r["b"].put("/admin/users/".concat(a))}}}},c16c:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination d-flex justify-content-center"},[e("li",{staticClass:"page-item"},[e("router-link",{directives:[{name:"show",rawName:"v-show",value:t.previousPage,expression:"previousPage"}],staticClass:"page-link",attrs:{"aria-label":"Previous",to:{name:t.adminPanel,query:{page:t.previousPage}}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])],1),t._l(t.totalPage,function(a){return e("li",{key:a,staticClass:"page-item",class:["page-item",{active:t.currentPage===a}]},[e("router-link",{staticClass:"page-link",attrs:{to:{name:t.adminPanel,query:{page:a}}}},[t._v(t._s(a))])],1)}),e("li",{staticClass:"page-item"},[e("router-link",{directives:[{name:"show",rawName:"v-show",value:t.nextPage,expression:"nextPage"}],staticClass:"page-link",attrs:{to:{name:t.adminPanel,query:{page:t.nextPage}},"aria-label":"Next"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])],1)],2)])},n=[],s=(e("c5f6"),{props:{currentPage:{type:Number,default:1},totalPage:{type:Number,default:-1},adminPanel:{type:String,required:!0}},computed:{previousPage:function(){return 1===this.currentPage?null:this.currentPage-1},nextPage:function(){return this.currentPage===this.totalPage?null:this.currentPage+1}}}),i=s,u=e("2877"),o=Object(u["a"])(i,r,n,!1,null,null,null);a["a"]=o.exports},c8bb:function(t,a,e){t.exports=e("54a1")},d2d5:function(t,a,e){e("1654"),e("549b"),t.exports=e("584a").Array.from},db7f:function(t,a,e){"use strict";var r=e("f70e"),n=e.n(r);n.a},e04c:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"mb-3"},[e("h1",[t._v("餐廳後台")]),e("div",{staticClass:"row admin-panel-nav mx-0"},[e("router-link",{staticClass:"mr-4 underline-animation pb-1",attrs:{to:"/admin/restaurants"}},[e("i",{staticClass:"fas fa-store-alt mr-2"}),t._v("Restaurant\n    ")]),e("router-link",{staticClass:"mr-4 underline-animation pb-1",attrs:{to:"/admin/categories"}},[e("i",{staticClass:"fas fa-clipboard-list mr-2"}),t._v("Categories\n    ")]),e("router-link",{staticClass:"underline-animation pb-1",attrs:{to:"/admin/users"}},[e("i",{staticClass:"fas fa-user mr-2"}),t._v("Users\n    ")])],1)])},n=[],s=(e("db7f"),e("2877")),i={},u=Object(s["a"])(i,r,n,!1,null,"c7205352",null);a["a"]=u.exports},f410:function(t,a,e){e("1af6"),t.exports=e("584a").Array.isArray},f70e:function(t,a,e){}}]);
//# sourceMappingURL=chunk-e4577bfc.c3f3bb1d.js.map