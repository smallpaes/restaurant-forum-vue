(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fafa861c"],{"22ab":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-3"},[r("NavTabs"),t.isLoading?r("Spinner"):t._e(),r("transition",{attrs:{"enter-active-class":"animated fadeIn"}},[t.isLoading?t._e():r("div",{staticClass:"row text-center mt-3"},t._l(t.users,function(e){return r("div",{key:e.id,staticClass:"col-12 col-md-6 col-lg-3 my-3"},[r("router-link",{attrs:{to:{name:"user",params:{id:e.id}}}},[r("img",{staticClass:"rounded-circle img-thumbnail avatar",attrs:{src:t._f("placeholderImage")(e.image)}})]),r("h4",{staticClass:"topic mb-0 mt-2"},[t._v(t._s(e.name))]),r("p",{staticClass:"text-secondary d-block follower"},[t._v("追蹤人數："+t._s(e.FollowerCount))]),r("p",{staticClass:"mt-2"},[t.currentUser.id===e.id?r("router-link",{staticClass:"btn red-btn btn-sm mt-0",attrs:{to:{name:"user-edit",params:{id:e.id}},role:"button"}},[t._v("編輯")]):e.isFollowed?r("button",{staticClass:"btn red-btn btn-sm mt-0",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.unfollow(e.id)}}},[t._v("取消追蹤")]):r("button",{staticClass:"btn red-btn btn-sm mt-0",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.follow(e.id)}}},[t._v("追蹤")])],1)],1)}),0)])],1)},s=[],a=(r("8e6e"),r("ac6a"),r("456d"),r("55dd"),r("96cf"),r("3b8d")),o=r("bd86"),i=r("4cce"),c=r("2fa3"),u=r("8bb1"),l=r("2708"),f=r("2f62"),p=r("2375");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(r,!0).forEach(function(e){Object(o["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var w={mixins:[l["b"]],computed:b({},Object(f["b"])(["currentUser"])),data:function(){return{users:[],isLoading:!0}},components:{NavTabs:u["a"],Spinner:p["a"]},created:function(){this.fetchUser()},methods:{fetchUser:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i["a"].getTopUser();case 3:if(e=t.sent,r=e.data,n=e.statusText,"OK"===n&&"success"===r.status){t.next=8;break}throw new Error(n);case 8:this.users=r.users,this.isLoading=!1,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),this.isLoading=!1,c["a"].fire({type:"error",title:"Cannot get top users, please try again later"});case 16:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}(),follow:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i["a"].addFollowing({userId:e});case 3:if(r=t.sent,n=r.data,s=r.statusText,"OK"===s&&"success"===n.status){t.next=8;break}throw new Error(s);case 8:this.users=this.users.map(function(t){return t.id!==e?t:b({},t,{isFollowed:!0,FollowerCount:t.FollowerCount+=1})}).sort(function(t,e){return e.FollowerCount-t.FollowerCount}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),c["a"].fire({type:"error",title:"Cannot follow this user, please try again later"});case 14:case"end":return t.stop()}},t,this,[[0,11]])}));function e(e){return t.apply(this,arguments)}return e}(),unfollow:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i["a"].removeFollowing({userId:e});case 3:if(r=t.sent,n=r.data,s=r.statusText,"OK"===s&&"success"===n.status){t.next=8;break}throw new Error(s);case 8:this.users=this.users.map(function(t){return t.id!==e?t:b({},t,{isFollowed:!1,FollowerCount:t.FollowerCount-=1})}).sort(function(t,e){return e.FollowerCount-t.FollowerCount}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),c["a"].fire({type:"error",title:"Cannnot unfollow this user, please try again later"});case 14:case"end":return t.stop()}},t,this,[[0,11]])}));function e(e){return t.apply(this,arguments)}return e}()}},h=w,m=(r("3260"),r("2877")),v=Object(m["a"])(h,n,s,!1,null,"2b4fe06c",null);e["default"]=v.exports},"2f21":function(t,e,r){"use strict";var n=r("79e5");t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},3260:function(t,e,r){"use strict";var n=r("6d46"),s=r.n(n);s.a},"55dd":function(t,e,r){"use strict";var n=r("5ca1"),s=r("d8e8"),a=r("4bf8"),o=r("79e5"),i=[].sort,c=[1,2,3];n(n.P+n.F*(o(function(){c.sort(void 0)})||!o(function(){c.sort(null)})||!r("2f21")(i)),"Array",{sort:function(t){return void 0===t?i.call(a(this)):i.call(a(this),s(t))}})},"6d46":function(t,e,r){}}]);
//# sourceMappingURL=chunk-fafa861c.7b1377a3.js.map