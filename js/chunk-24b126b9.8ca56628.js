(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24b126b9"],{1511:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[t.isLoading?s("Spinner"):t._e(),s("transition",{attrs:{name:"slide"}},[t.isLoading?t._e():s("div",{staticClass:"container py-3"},[s("div",{staticClass:"row"},[s("UserProfileCard",{attrs:{profile:t.profile,"initial-is-followed":t.isFollowed,currentUser:t.currentUser},on:{"handle-after-following":t.handleAfterFollowing,"handle-after-unfollowing":t.handleAfterUnfollowing}}),s("section",{staticClass:"col-12 col-md-5"},[s("UserFollowingsCard",{attrs:{"following-users":t.profile.Followings}}),s("UserFollowersCard",{attrs:{followers:t.profile.Followers}})],1),s("section",{staticClass:"col-12 col-md-7"},[s("UserCommentsCard",{attrs:{comments:t.profile.Comments}}),s("UserFavoritedRestaurantsCard",{attrs:{"favorite-restaurants":t.profile.FavoritedRestaurants}})],1)],1)])])],1)},r=[],i=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("96cf"),s("3b8d")),n=s("bd86"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"col-12 row m-0 p-0"},[s("section",{staticClass:"col-12 col-md-5",attrs:{id:"profile-section"}},[s("ul",{staticClass:"list-group text-center shadow-sm"},[s("li",{staticClass:"list-group-item p-0 pt-4 px-2 border-0 avatar"},[s("img",{staticClass:"img-thumbnail rounded-circle border-0 w-50",attrs:{src:t._f("placeholderImage")(t.profile.image),alt:"avatar"}})]),s("li",{staticClass:"list-group-item p-0 pt-2 px-2 border-0"},[s("h4",{staticClass:"m-0 user-name"},[t._v(t._s(t.profile.name))])]),s("li",{staticClass:"list-group-item p-0 border-0 px-2 text-secondary"},[t._v(t._s(t.profile.email))]),t.currentUser.id===t.profile.id?s("li",{staticClass:"list-group-item py-4 px-2 border-0"},[s("router-link",{staticClass:"btn red-btn btn-sm px-2 py-0 align-self-end",attrs:{to:{name:"user-edit",params:{id:t.profile.id}},role:"button"}},[t._v("Edit")])],1):t.isFollowed?s("li",{staticClass:"list-group-item py-4 px-2 border-0"},[s("button",{staticClass:"btn red-btn btn-sm px-2 py-0 align-self-end",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteFollowing(t.profile.id)}}},[s("i",{staticClass:"fas fa-star mr-1"}),t._v("取消追蹤\n        ")])]):s("li",{staticClass:"list-group-item py-4 px-2 border-0"},[s("button",{staticClass:"btn red-btn btn-sm px-2 py-0 align-self-end",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addFollowing(t.profile.id)}}},[s("i",{staticClass:"far fa-star mr-1"}),t._v("追蹤\n        ")])])])]),s("section",{staticClass:"col-12 col-md-7",attrs:{id:"status-section"}},[s("div",{staticClass:"row bg-white shadow-sm rounded text-center text-secondary w-100 mx-0 h-100"},[s("div",{staticClass:"col-6 px-3 py-4 d-flex flex-column justify-content-center"},[s("h2",{staticClass:"mb-2"},[t._v(t._s(t.profile.Comments.length))]),s("p",{staticClass:"m-0"},[t._v("已評論餐廳")])]),s("div",{staticClass:"col-6 px-3 py-4 d-flex flex-column justify-content-center"},[s("h2",{staticClass:"mb-2"},[t._v(t._s(t.profile.FavoritedRestaurants.length))]),s("p",{staticClass:"m-0"},[t._v("收藏的餐廳")])]),s("div",{staticClass:"col-6 px-3 py-4 d-flex flex-column justify-content-center"},[s("h2",{staticClass:"mb-2"},[t._v(t._s(t.profile.Followings.length))]),s("p",{staticClass:"m-0"},[t._v("已追蹤用戶")])]),s("div",{staticClass:"col-6 px-3 py-4 d-flex flex-column justify-content-center"},[s("h2",{staticClass:"mb-2"},[t._v(t._s(t.profile.Followers.length))]),s("p",{staticClass:"m-0"},[t._v("用戶追蹤")])])])])])},o=[],c=s("2708"),d=s("4cce"),u=s("2fa3"),m={mixins:[c["b"]],props:{profile:{type:Object,required:!0},initialIsFollowed:{type:Boolean,required:!0},currentUser:{type:Object,required:!0}},data:function(){return{isFollowed:this.initialIsFollowed}},watch:{initialIsFollowed:function(t){this.isFollowed=t}},methods:{addFollowing:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var s,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].addFollowing({userId:e});case 3:if(s=t.sent,a=s.data,r=s.statusText,"OK"===r&&"success"===a.status){t.next=8;break}throw new Error(r);case 8:this.isFollowed=!0,this.$emit("handle-after-following"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),u["a"].fire({type:"error",title:"Cannot follow this user, please try again later"});case 15:case"end":return t.stop()}},t,this,[[0,12]])}));function e(e){return t.apply(this,arguments)}return e}(),deleteFollowing:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var s,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].removeFollowing({userId:e});case 3:if(s=t.sent,a=s.data,r=s.statusText,"OK"===r&&"success"===a.status){t.next=8;break}throw new Error(r);case 8:this.isFollowed=!1,this.$emit("handle-after-unfollowing"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),u["a"].fire({type:"error",title:"Cannot unfollow this user, please try again later"});case 15:case"end":return t.stop()}},t,this,[[0,12]])}));function e(e){return t.apply(this,arguments)}return e}()}},p=m,f=(s("bbd6"),s("2877")),h=Object(f["a"])(p,l,o,!1,null,"93847fd6",null),v=h.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card shadow-sm mt-4",attrs:{id:"following"}},[s("h6",{staticClass:"mt-4 mb-1 pl-4 header"},[t._v(t._s(t.followingUsers.length)+" 已追蹤用戶")]),s("hr",{staticClass:"mx-3"}),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[t.followingUsers.length>0?t._l(t.followingUsers,function(e){return s("router-link",{key:e.id,staticClass:"col-12 media my-2",attrs:{to:{name:"user",params:{id:e.id}}}},[s("div",{staticClass:"media-image mr-3 position-relative"},[s("div",{staticClass:"loader-container text-center"},[s("div",{staticClass:"loader"})]),s("img",{staticClass:"rounded",attrs:{src:t._f("placeholderImage")(e.image),alt:"user image"}})]),s("div",{staticClass:"media-body text-truncate"},[s("h6",{staticClass:"mt-0 text-truncate m-0"},[t._v(t._s(e.name))])])])}):[t._m(0)]],2)])])},C=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h5",{staticClass:"col-12 text-center p-3 m-0 text-muted"},[s("i",{staticClass:"far fa-paper-plane mr-2"}),t._v("No Following Users Yet!\n        ")])}],g={mixins:[c["b"]],props:{followingUsers:{type:Array,required:!0}}},b=g,x=(s("5bf3"),Object(f["a"])(b,w,C,!1,null,"14b85f58",null)),_=x.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card shadow-sm mt-4",attrs:{id:"follower"}},[s("h6",{staticClass:"mt-4 mb-1 pl-4 header"},[t._v(t._s(t.followers.length)+" 用戶追蹤")]),s("hr",{staticClass:"mx-3"}),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[t.followers.length?t._l(t.followers,function(e){return s("router-link",{key:e.id,staticClass:"col-12 media my-2",attrs:{to:{name:"user",params:{id:e.id}}}},[s("div",{staticClass:"media-image mr-3 position-relative"},[s("div",{staticClass:"loader-container text-center"},[s("div",{staticClass:"loader"})]),s("img",{staticClass:"rounded",attrs:{src:t._f("placeholderImage")(e.image),alt:"user image"}})]),s("div",{staticClass:"media-body text-truncate"},[s("h6",{staticClass:"mt-0 text-truncate m-0"},[t._v(t._s(e.name))])])])}):[t._m(0)]],2)])])},F=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h5",{staticClass:"col-12 text-center p-3 m-0 text-muted"},[s("i",{staticClass:"far fa-paper-plane mr-2"}),t._v("No Followers Yet!\n        ")])}],O={mixins:[c["b"]],props:{followers:{type:Array,required:!0}}},U=O,j=Object(f["a"])(U,y,F,!1,null,null,null),k=j.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card shadow-sm mt-4",attrs:{id:"comment"}},[s("h6",{staticClass:"mt-4 mb-1 pl-4 header"},[t._v(t._s(t.comments.length)+" 已評論餐廳")]),s("hr",{staticClass:"mx-3"}),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[t.comments.length>0?t._l(t.comments,function(e){return s("router-link",{key:e.id,staticClass:"col-12 media my-2",attrs:{to:{name:"restaurant",params:{id:e.Restaurant.id}}}},[s("div",{staticClass:"media-image mr-3 position-relative"},[s("div",{staticClass:"loader-container text-center"},[s("div",{staticClass:"loader"})]),s("img",{staticClass:"rounded",attrs:{src:t._f("placeholderImage")(e.Restaurant.image),alt:"user image"}})]),s("div",{staticClass:"media-body text-truncate"},[s("h6",{staticClass:"mt-0 text-truncate m-0"},[t._v(t._s(e.Restaurant.name))]),s("p",{staticClass:"text-truncate text-muted font-italic m-0"},[t._v(t._s(e.text))])])])}):[t._m(0)]],2)])])},E=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h5",{staticClass:"col-12 text-center p-3 m-0 text-muted"},[s("i",{staticClass:"far fa-paper-plane mr-2"}),t._v("No Comment Yet!\n        ")])}],$={mixins:[c["b"]],props:{comments:{type:Array,required:!0}}},I=$,P=Object(f["a"])(I,R,E,!1,null,null,null),A=P.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card shadow-sm mt-4",attrs:{id:"favorite"}},[s("h6",{staticClass:"mt-4 mb-1 pl-4 header"},[t._v(t._s(t.favoriteRestaurants.length)+" 收藏的餐廳")]),s("hr",{staticClass:"mx-3"}),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[t.favoriteRestaurants.length>0?t._l(t.favoriteRestaurants,function(e){return s("router-link",{key:e.id,staticClass:"col-12 media my-2",attrs:{to:{name:"restaurant",params:{id:e.id}}}},[s("div",{staticClass:"media-image mr-3 position-relative"},[s("div",{staticClass:"loader-container text-center"},[s("div",{staticClass:"loader"})]),s("img",{staticClass:"rounded",attrs:{src:t._f("placeholderImage")(e.image),alt:"restaurant image"}})]),s("div",{staticClass:"media-body text-truncate"},[s("h6",{staticClass:"mt-0 text-truncate m-0"},[t._v(t._s(e.name))]),s("p",{staticClass:"text-truncate text-muted font-italic m-0"},[t._v(t._s(e.Category.name))])])])}):[t._m(0)]],2)])])},D=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h5",{staticClass:"col-12 text-center p-3 m-0 text-muted"},[s("i",{staticClass:"far fa-paper-plane mr-2"}),t._v("No Favorite Restaurant Yet!\n        ")])}],L={mixins:[c["b"]],props:{favoriteRestaurants:{type:Array,required:!0}}},N=L,S=Object(f["a"])(N,q,D,!1,null,null,null),Y=S.exports,K=s("2375"),T=s("2f62");s("3e8f");function J(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function M(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?J(s,!0).forEach(function(e){Object(n["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):J(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var z={data:function(){return{profile:{id:-1,name:"",email:"",isAdmin:!0,image:"https://i.imgur.com/58ImzMM.png",Comments:[],FavoritedRestaurants:[],Followers:[],Followings:[]},isFollowed:!1,isLoading:!0}},components:{UserProfileCard:v,UserFollowingsCard:_,UserFollowersCard:k,UserCommentsCard:A,UserFavoritedRestaurantsCard:Y,Spinner:K["a"]},computed:M({},Object(T["b"])(["currentUser"])),created:function(){var t=this.$route.params.id;this.fetchUser(t)},beforeRouteUpdate:function(t,e,s){var a=t.params.id;this.fetchUser(a),s()},methods:{fetchUser:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var s,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isLoading=!0,t.next=4,d["a"].get({userId:e});case 4:if(s=t.sent,a=s.data,r=s.statusText,"OK"===r&&"success"===a.status){t.next=9;break}throw new Error(r);case 9:this.profile={id:a.owner.id,name:a.owner.name,email:a.owner.email,isAdmin:a.owner.isAdmin,image:a.owner.image,Comments:a.owner.Comments,FavoritedRestaurants:a.owner.FavoritedRestaurants,Followers:a.owner.Followers,Followings:a.owner.Followings},this.isFollowed=a.owner.isFollowed,this.isLoading=!1,t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),this.isLoading=!1,u["a"].fire({type:"error",title:"Cannot get profile, please try again later!"});case 18:case"end":return t.stop()}},t,this,[[0,14]])}));function e(e){return t.apply(this,arguments)}return e}(),handleAfterFollowing:function(){this.profile.Followers.push({id:this.currentUser.id,image:this.currentUser.image})},handleAfterUnfollowing:function(){var t=this;this.profile.Followers=this.profile.Followers.filter(function(e){return e.id!==t.currentUser.id})}}},B=z,G=(s("801b"),Object(f["a"])(B,a,r,!1,null,"410b566a",null));e["default"]=G.exports},"5bf3":function(t,e,s){"use strict";var a=s("8a88"),r=s.n(a);r.a},"801b":function(t,e,s){"use strict";var a=s("e9d3"),r=s.n(a);r.a},"8a88":function(t,e,s){},b82c:function(t,e,s){},bbd6:function(t,e,s){"use strict";var a=s("b82c"),r=s.n(a);r.a},e9d3:function(t,e,s){}}]);
//# sourceMappingURL=chunk-24b126b9.8ca56628.js.map