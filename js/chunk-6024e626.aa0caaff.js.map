{"version":3,"sources":["webpack:///./src/views/UserEdit.vue?99d7","webpack:///src/views/UserEdit.vue","webpack:///./src/views/UserEdit.vue?2b31","webpack:///./src/views/UserEdit.vue","webpack:///./src/views/UserEdit.vue?0cf1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_e","attrs","isLoading","_v","on","$event","stopPropagation","preventDefault","handleSubmit","directives","name","rawName","value","profile","expression","domProps","target","composing","$set","image","imgIsLoading","key","changeLoading","handleFileChange","isProcessing","staticRenderFns","components","Spinner","data","id","email","created","fetchProfile","methods","files","length","imageURL","component"],"mappings":"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","file":"js/chunk-6024e626.aa0caaff.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[(_vm.isLoading)?_c('Spinner'):_vm._e(),_c('transition',{attrs:{\"name\":\"fade\"}},[(!_vm.isLoading)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12 col-md-10 col-lg-8 offset-md-1 offset-lg-2\"},[_c('h2',{staticClass:\"pt-3\"},[_vm._v(\"Edit Profile\")]),_c('form',{staticClass:\"py-3\",on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.profile.name),expression:\"profile.name\"}],staticClass:\"form-control\",attrs:{\"id\":\"name\",\"type\":\"text\",\"name\":\"name\",\"placeholder\":\"Enter Name\",\"required\":\"\"},domProps:{\"value\":(_vm.profile.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.profile, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"Email\"}},[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.profile.email),expression:\"profile.email\"}],staticClass:\"form-control\",attrs:{\"id\":\"email\",\"type\":\"text\",\"name\":\"email\",\"placeholder\":\"Enter Email\",\"required\":\"\"},domProps:{\"value\":(_vm.profile.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.profile, \"email\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"image\"}},[_vm._v(\"Image\")]),(_vm.profile.image && _vm.imgIsLoading)?_c('div',{staticClass:\"placeholder-img d-flex justify-content-center align-items-center rounded\"},[_c('Spinner',{staticClass:\"p-0\"})],1):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.profile.image && !_vm.imgIsLoading),expression:\"profile.image && !imgIsLoading\"}],staticClass:\"img-container\"},[_c('transition',{attrs:{\"name\":\"img-fade\"}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.profile.image && !_vm.imgIsLoading),expression:\"profile.image && !imgIsLoading\"}],key:_vm.profile.image,staticClass:\"img-fluid d-block rounded\",attrs:{\"src\":_vm.profile.image,\"alt\":\"Profile picture\",\"width\":\"200\",\"height\":\"200\"},on:{\"load\":_vm.changeLoading}})])],1),_c('input',{staticClass:\"form-control-file mt-2\",attrs:{\"id\":\"image\",\"type\":\"file\",\"name\":\"image\",\"accept\":\"image/*\"},on:{\"change\":_vm.handleFileChange}})]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"disabled\":_vm.isProcessing,\"type\":\"submit\"}},[_vm._v(\"Submit\")])])])]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <Spinner v-if=\"isLoading\" />\n    <transition name=\"fade\">\n      <div class=\"row\" v-if=\"!isLoading\">\n        <div class=\"col-12 col-md-10 col-lg-8 offset-md-1 offset-lg-2\">\n          <h2 class=\"pt-3\">Edit Profile</h2>\n          <form @submit.stop.prevent=\"handleSubmit\" class=\"py-3\">\n            <div class=\"form-group\">\n              <label for=\"name\">Name</label>\n              <input\n                id=\"name\"\n                v-model=\"profile.name\"\n                type=\"text\"\n                name=\"name\"\n                class=\"form-control\"\n                placeholder=\"Enter Name\"\n                required\n              />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"Email\">Email</label>\n              <input\n                id=\"email\"\n                v-model=\"profile.email\"\n                type=\"text\"\n                name=\"email\"\n                class=\"form-control\"\n                placeholder=\"Enter Email\"\n                required\n              />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"image\">Image</label>\n              <div\n                v-if=\"profile.image && imgIsLoading\"\n                class=\"placeholder-img d-flex justify-content-center align-items-center rounded\"\n              >\n                <Spinner class=\"p-0\" />\n              </div>\n              <div class=\"img-container\" v-show=\"profile.image && !imgIsLoading\">\n                <transition name=\"img-fade\">\n                  <img\n                    v-show=\"profile.image && !imgIsLoading\"\n                    :src=\"profile.image\"\n                    :key=\"profile.image\"\n                    alt=\"Profile picture\"\n                    class=\"img-fluid d-block rounded\"\n                    @load=\"changeLoading\"\n                    width=\"200\"\n                    height=\"200\"\n                  />\n                </transition>\n              </div>\n              <input\n                id=\"image\"\n                @change=\"handleFileChange\"\n                type=\"file\"\n                name=\"image\"\n                accept=\"image/*\"\n                class=\"form-control-file mt-2\"\n              />\n            </div>\n\n            <button :disabled=\"isProcessing\" type=\"submit\" class=\"btn btn-primary\">Submit</button>\n          </form>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport userAPI from \"../apis/users\";\nimport { Toast } from \"../utils/helpers\";\nimport Spinner from \"../components/Spinner\";\n\nexport default {\n  name: \"UserEdit\",\n  components: {\n    Spinner\n  },\n  data() {\n    return {\n      profile: {\n        id: -1,\n        name: \"\",\n        image: \"\",\n        email: \"\"\n      },\n      isLoading: true,\n      imgIsLoading: true,\n      isProcessing: false\n    };\n  },\n  created() {\n    const { id } = this.$route.params;\n    this.fetchProfile(id);\n  },\n  methods: {\n    changeLoading() {\n      this.imgIsLoading = false;\n    },\n    async fetchProfile(userId) {\n      try {\n        const { data, statusText } = await userAPI.get({ userId });\n        // error handling\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(statusText);\n        }\n        // update data\n        this.profile = {\n          ...this.profile,\n          id: data.owner.id,\n          name: data.owner.name,\n          email: data.owner.email,\n          image: data.owner.image\n        };\n        // update loading status\n        this.isLoading = false;\n      } catch (error) {\n        // update loading status\n        this.isLoading = false;\n        Toast.fire({\n          type: \"error\",\n          title: \"Cannot get you data, please try again later\"\n        });\n      }\n    },\n    handleFileChange(e) {\n      const files = e.target.files;\n      if (!files.length) return;\n      const imageURL = window.URL.createObjectURL(files[0]);\n      this.profile.image = imageURL;\n    },\n    async handleSubmit(e) {\n      // get the form\n      const form = e.target;\n      // create formData instance\n      const formData = new FormData(form);\n      try {\n        // update processing status\n        this.isProcessing = true;\n        const { data, statusText } = await userAPI.updateUser({\n          userId: this.profile.id,\n          formData\n        });\n        // error handling\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(statusText);\n        }\n        // update processing status\n        this.isProcessing = false;\n        // redirect back to user profile page\n        this.$router.push({ name: \"user\", params: { id: this.profile.id } });\n      } catch (error) {\n        // update processing status\n        this.isProcessing = false;\n        Toast.fire({\n          type: \"error\",\n          title: \"Cannot update your profile, please try again later\"\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.placeholder-img {\n  width: 200px;\n  height: 200px;\n}\n\n.img-fade-enter,\n.img-fade-leave {\n  opacity: 0;\n}\n\n.img-fade-enter-active {\n  transition: opacity 1s ease-out;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserEdit.vue?vue&type=template&id=fa1ba3a8&scoped=true&\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserEdit.vue?vue&type=style&index=0&id=fa1ba3a8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fa1ba3a8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=style&index=0&id=fa1ba3a8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=style&index=0&id=fa1ba3a8&scoped=true&lang=css&\""],"sourceRoot":""}