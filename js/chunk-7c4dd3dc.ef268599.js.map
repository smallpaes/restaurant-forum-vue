{"version":3,"sources":["webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./src/views/RestaurantsTop.vue?f3f8","webpack:///src/views/RestaurantsTop.vue","webpack:///./src/views/RestaurantsTop.vue?3181","webpack:///./src/views/RestaurantsTop.vue","webpack:///./src/views/RestaurantsTop.vue?50ff"],"names":["fails","module","exports","method","arg","call","$export","aFunction","toObject","$sort","sort","test","P","F","undefined","comparefn","this","render","_vm","_h","$createElement","_c","_self","staticClass","_e","attrs","isLoading","_l","restaurant","key","id","name","params","image","_v","_s","favoriteUser","description","on","$event","stopPropagation","preventDefault","deleteFavorite","addFavorite","staticRenderFns","components","NavTabs","Spinner","data","restaurants","created","fetchRestaurants","methods","component"],"mappings":"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","file":"js/chunk-7c4dd3dc.ef268599.js","sourcesContent":["'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-3\"},[_c('NavTabs'),(_vm.isLoading)?_c('Spinner'):_vm._e(),_c('transition',{attrs:{\"enter-active-class\":\"animated fadeIn\"}},[(!_vm.isLoading)?_c('section',_vm._l((_vm.restaurants),function(restaurant){return _c('div',{key:restaurant.id,staticClass:\"card my-3 border-0\"},[_c('div',{staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"image p-2\"},[_c('router-link',{attrs:{\"to\":{name: 'restaurant', params: {id: restaurant.id}}}},[_c('img',{staticClass:\"w-100 rounded-sm\",attrs:{\"src\":restaurant.image}})])],1),_c('div',{staticClass:\"col flex-column d-flex justify-content-between\"},[_c('div',{staticClass:\"card-body pb-0\"},[_c('h5',{staticClass:\"card-title m-0\"},[_vm._v(_vm._s(restaurant.name))]),_c('small',[_c('i',{staticClass:\"fas fa-bookmark\"}),_vm._v(\"\\n                收藏數：\"+_vm._s(restaurant.favoriteUser)+\"\\n              \")]),_c('p',{staticClass:\"card-text mb-0 mt-2 mt-lg-3 py-sm-2 py-md-1\"},[_vm._v(_vm._s(restaurant.description))])]),_c('div',{staticClass:\"card-footer d-flex bg-white py-2 align-items-center justify-content-end border-0\"},[_c('router-link',{staticClass:\"btn btn-outline-secondary btn-sm mr-2 shadow-sm\",attrs:{\"to\":{name: 'restaurant', params: {id: restaurant.id}}}},[_vm._v(\"Show\")]),(restaurant.isFavorite)?_c('button',{staticClass:\"btn btn-outline-secondary btn-sm shadow-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteFavorite(restaurant.id)}}},[_vm._v(\"移除最愛\")]):_c('button',{staticClass:\"btn btn-outline-secondary btn-sm shadow-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addFavorite(restaurant.id)}}},[_vm._v(\"加到最愛\")])],1)])]),_c('hr')])}),0):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container py-3\">\n    <!--NavTabs-->\n    <NavTabs />\n    <Spinner v-if=\"isLoading\" />\n    <transition enter-active-class=\"animated fadeIn\">\n      <!--Show Top Restaurants-->\n      <section v-if=\"!isLoading\">\n        <div v-for=\"restaurant in restaurants\" :key=\"restaurant.id\" class=\"card my-3 border-0\">\n          <div class=\"row no-gutters\">\n            <div class=\"image p-2\">\n              <router-link :to=\"{name: 'restaurant', params: {id: restaurant.id}}\">\n                <img class=\"w-100 rounded-sm\" :src=\"restaurant.image\" />\n              </router-link>\n            </div>\n            <div class=\"col flex-column d-flex justify-content-between\">\n              <div class=\"card-body pb-0\">\n                <h5 class=\"card-title m-0\">{{restaurant.name}}</h5>\n                <small>\n                  <i class=\"fas fa-bookmark\"></i>\n                  收藏數：{{restaurant.favoriteUser}}\n                </small>\n                <p class=\"card-text mb-0 mt-2 mt-lg-3 py-sm-2 py-md-1\">{{restaurant.description}}</p>\n              </div>\n              <div\n                class=\"card-footer d-flex bg-white py-2 align-items-center justify-content-end border-0\"\n              >\n                <router-link\n                  :to=\"{name: 'restaurant', params: {id: restaurant.id}}\"\n                  class=\"btn btn-outline-secondary btn-sm mr-2 shadow-sm\"\n                >Show</router-link>\n\n                <button\n                  v-if=\"restaurant.isFavorite\"\n                  @click.stop.prevent=\"deleteFavorite(restaurant.id)\"\n                  type=\"button\"\n                  class=\"btn btn-outline-secondary btn-sm shadow-sm\"\n                >移除最愛</button>\n                <button\n                  v-else\n                  @click.stop.prevent=\"addFavorite(restaurant.id)\"\n                  type=\"button\"\n                  class=\"btn btn-outline-secondary btn-sm shadow-sm\"\n                >加到最愛</button>\n              </div>\n            </div>\n          </div>\n          <hr />\n        </div>\n      </section>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport restaurantsAPI from \"../apis/restaurants\";\nimport usersAPI from \"../apis/users\";\nimport { Toast } from \"../utils/helpers\";\nimport NavTabs from \"../components/NavTabs\";\nimport Spinner from \"../components/Spinner\";\n\nexport default {\n  components: {\n    NavTabs,\n    Spinner\n  },\n  data() {\n    return {\n      restaurants: [],\n      isLoading: true\n    };\n  },\n  created() {\n    this.fetchRestaurants();\n  },\n  methods: {\n    async fetchRestaurants() {\n      try {\n        const { data, statusText } = await restaurantsAPI.getTopRestaurants();\n        // error handling\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(statusText);\n        }\n        // update restaurant data\n        this.restaurants = data.restaurants;\n        this.isLoading = false;\n      } catch (error) {\n        this.isLoading = false;\n        Toast.fire({\n          type: \"error\",\n          title: \"Cannot show top restaurants, please try again later\"\n        });\n      }\n    },\n    async addFavorite(restaurantId) {\n      try {\n        const { data, statusText } = await usersAPI.addFavorite({\n          restaurantId\n        });\n        // error handling\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(statusText);\n        }\n        // update restaurant data\n        this.restaurants = this.restaurants\n          .map(restaurant => {\n            if (restaurant.id !== restaurantId) {\n              return restaurant;\n            }\n            return {\n              ...restaurant,\n              isFavorite: true,\n              favoriteUser: (restaurant.favoriteUser += 1)\n            };\n          })\n          .sort((a, b) => b.favoriteUser - a.favoriteUser);\n      } catch (error) {\n        Toast.fire({\n          type: \"error\",\n          title: \"Cannot add restaurant to favorite, please try again later\"\n        });\n      }\n    },\n    async deleteFavorite(restaurantId) {\n      try {\n        const { data, statusText } = await usersAPI.deleteFavorite({\n          restaurantId\n        });\n        // error handling\n        if (statusText !== \"OK\" || data.status !== \"success\") {\n          throw new Error(statusText);\n        }\n        // update restaurant data\n        this.restaurants = this.restaurants\n          .map(restaurant => {\n            if (restaurant.id !== restaurantId) {\n              return restaurant;\n            }\n            return {\n              ...restaurant,\n              isFavorite: false,\n              favoriteUser: (restaurant.favoriteUser -= 1)\n            };\n          })\n          .sort((a, b) => b.favoriteUser - a.favoriteUser);\n      } catch (error) {\n        Toast.fire({\n          type: \"error\",\n          title:\n            \"Cannot remove restaurant from favorite, please try again later\"\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.image {\n  width: 100%;\n}\n\n.card-title {\n  color: rgb(73, 73, 73);\n}\n\n.card-body small,\n.card-body small i {\n  color: #c22424;\n}\n\n.btn-group-sm > .btn,\n.btn-sm {\n  border-radius: 0.3rem;\n  padding: 0.1 0.6rem;\n}\n\n/*md size*/\n@media screen and (min-width: 768px) {\n  /*Top Restaurant Section*/\n  .image {\n    width: 270px;\n  }\n}\n\n/*lg size*/\n@media screen and (min-width: 992px) {\n  /*Top Restaurant Section*/\n  .image {\n    width: 300px;\n  }\n\n  /*Follow & Favorite*/\n  .btn-group-sm > .btn,\n  .btn-sm {\n    padding: 0.2rem 0.7rem;\n  }\n\n  .card-title {\n    font-size: 1.6rem;\n  }\n\n  .card-text {\n    font-size: 1.1rem;\n  }\n}\n\n/*xl size*/\n@media screen and (min-width: 1200px) {\n  /*Top Restaurant Section*/\n  .image {\n    width: 350px;\n  }\n\n  /*Follow & Favorite*/\n  .btn-group-sm > .btn,\n  .btn-sm {\n    padding: 0.3rem 0.8rem;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantsTop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantsTop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestaurantsTop.vue?vue&type=template&id=16dd1ec3&scoped=true&\"\nimport script from \"./RestaurantsTop.vue?vue&type=script&lang=js&\"\nexport * from \"./RestaurantsTop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RestaurantsTop.vue?vue&type=style&index=0&id=16dd1ec3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16dd1ec3\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantsTop.vue?vue&type=style&index=0&id=16dd1ec3&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RestaurantsTop.vue?vue&type=style&index=0&id=16dd1ec3&scoped=true&lang=css&\""],"sourceRoot":""}